{"version":3,"sources":["scripts/app-a6ddda6c3d.js"],"names":["angular","module","WineController","$stateParams","wineSrv","toastr","vm","this","wid","wine","comment","findById","then","error","data","addComment","comments","push","$inject","controller","CellarController","cellarSrv","cartSrv","cellar","find","stock","id","getMyCellar","drink","quantity","err","buy","add","toggleFavorite","favorite","setFavorite","result","CatalogController","query","wines","search","select","CartController","$rootScope","$state","cart","shared","computeTotal","map","order","price","reduce","sum","elt","computeTva","clear","total","remove","info","go","LoginController","loginSrv","user","email","password","login","winePrice","restrict","templateUrl","scope","category","directive","wineImg","config","link","url","imgUrl","mainNavbar","NavbarController","getUser","signOut","logout","controllerAs","bindToController","wineDetail","WineService","$log","$http","get","response","message","post","service","LoginService","$auth","getPayload","CellarService","qty","parseInt","CartService","storage","key","fromJson","getItem","that","getMyCart","current","setItem","toJson","detail","idx","indexOf","splice","length","body","entries","ImgNameFilter","value","replace","filter","CssClassFilter","runBlock","debug","run","routerConfig","$stateProvider","$urlRouterProvider","state","abstract","parent","views","body@main","otherwise","constant","localStorage","$logProvider","toastrConfig","$authProvider","debugEnabled","allowHtml","timeOut","positionClass","preventDuplicates","progressBar","loginUrl","$templateCache","put"],"mappings":"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","file":"scripts/app-a6ddda6c3d.js","sourcesContent":["(function () {\n  'use strict';\n\n  angular\n    .module('webFrontend', ['ngSanitize', 'ngMessages', 'ui.router', 'toastr', 'satellizer']);\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('webFrontend')\n    .controller('WineController', WineController);\n\n  /** @ngInject */\n  function WineController($stateParams, wineSrv, toastr) {\n    var vm = this;\n\n    vm.wid = $stateParams.wid;\n    vm.wine = null;\n    vm.comment = null;\n\n    wineSrv.findById(vm.wid)\n      .then(function (wine) {\n        vm.wine = wine;\n      })\n      .catch(function (error) {\n        toastr.error('Oops !', error.data);\n      });\n\n    vm.addComment = function () {\n      wineSrv.addComment(vm.wid, vm.comment)\n        .then(function (comment) {\n          vm.comment = null;\n          vm.wine.comments.push(comment);\n        })\n        .catch(function (error) {\n          toastr.error('Oops !', error.data);\n        });\n    };\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('webFrontend')\n    .controller('CellarController', CellarController);\n\n  /** @ngInject */\n  function CellarController(cellarSrv, cartSrv, toastr) {\n    var vm = this;\n\n    vm.cellar = [];\n\n    var findById = function (wid) {\n      return vm.cellar.find(function (stock) {\n        return wid === stock.wine.id;\n      });\n    };\n\n    // Load data\n    cellarSrv.getMyCellar()\n      .then(function (cellar) {\n        vm.cellar = cellar;\n      })\n      .catch(function (error) {\n        toastr.error('Oops !', error.data);\n      });\n\n    vm.drink = function (wid) {\n      cellarSrv.drink(wid)\n        .then(function (quantity) {\n          var stock = findById(wid);\n          stock.quantity = quantity;\n        })\n        .catch(function (err) {\n          toastr.error(err.data, 'Oops!');\n        });\n    };\n\n    vm.buy = function (wid) {\n      cartSrv.add(wid);\n    };\n\n    vm.toggleFavorite = function (stock) {\n      var favorite = !stock.favorite;\n      cellarSrv.setFavorite(stock.wine.id, favorite)\n        .then(function (result) {\n          stock.favorite = 'true' === result;\n        })\n        .catch(function (err) {\n          toastr.error(err.data, 'Oops!');\n        })\n\n    }\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('webFrontend')\n    .controller('CatalogController', CatalogController);\n\n  /** @ngInject */\n  function CatalogController(wineSrv, toastr) {\n    var vm = this;\n    vm.query = null;\n    vm.wines = [];\n    vm.wine = null;\n    vm.comment = null;\n\n    vm.search = function () {\n      wineSrv.search(vm.query)\n        .then(function (wines) {\n          vm.wines = wines;\n          if (wines[0]) {\n            vm.select(wines[0].id);\n          }\n        })\n        .catch(function (error) {\n          toastr.error('Oops !', error.data);\n        });\n    };\n    vm.search();\n\n    vm.select = function (wid) {\n      wineSrv.findById(wid)\n        .then(function (wine) {\n          vm.wine = wine;\n        })\n        .catch(function (error) {\n          toastr.error('Oops !', error.data);\n        });\n    };\n\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('webFrontend')\n    .controller('CartController', CartController);\n\n  /** @ngInject */\n  function CartController($rootScope, $state, cartSrv, toastr) {\n    var vm = this;\n    vm.cart = $rootScope.shared.cart;\n\n    vm.computeTotal = function () {\n      return vm.cart\n          .map(function (order) {\n            return order.quantity * order.stock.price;\n          })\n          .reduce(function (sum, elt) {\n            return sum + elt;\n          }, 0) + vm.computeTva();\n    };\n\n    vm.computeTva = function () {\n      return 0.2 * vm.cart\n          .map(function (order) {\n            return order.quantity * order.stock.price;\n          })\n          .reduce(function (sum, elt) {\n            return sum + elt;\n          }, 0);\n    };\n\n    vm.clear = function () {\n      cartSrv.clear();\n      vm.total = 0;\n    };\n    vm.remove = function (stock) {\n      cartSrv.remove(stock);\n    };\n\n    vm.order = function () {\n      cartSrv.order()\n        .then(function () {\n          toastr.info('Commande réussite!');\n          $state.go('cellar');\n        })\n        .catch(function (error) {\n          //toastr.error('Oops !', error.data);\n          toastr.error(error.data);\n        });\n    }\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('webFrontend')\n    .controller('LoginController', LoginController);\n\n  /** @ngInject */\n  function LoginController($state, loginSrv) {\n    var vm = this;\n\n    vm.error = null;\n    vm.user = {\n      email: null,\n      password: null\n    };\n\n    vm.login = function () {\n      return loginSrv.login(vm.user)\n        .then(function () {\n          $state.go('cellar');\n        })\n        .catch(function () {\n          vm.error = \"Invalid login/passowrd :(\";\n        });\n    }\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('webFrontend')\n    .directive('winePrice', winePrice);\n\n  /** @ngInject */\n  function winePrice() {\n    return {\n      restrict: 'E',\n      templateUrl: 'app/directives/winePrice/wine.price.html',\n      scope: {\n        category: '='\n      }\n    };\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('webFrontend')\n    .directive('wineImg', wineImg);\n\n  /** @ngInject */\n  function wineImg(config) {\n    return {\n      restrict: 'E',\n      templateUrl: 'app/directives/wineImg/wine.image.html',\n      scope: {\n        wine: '='\n      }, link: function (scope) {\n        scope.url = config.imgUrl;\n      }\n    };\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('webFrontend')\n    .directive('wineNavbar', mainNavbar);\n\n  /** @ngInject */\n  function mainNavbar() {\n    return {\n      restrict: 'E',\n      templateUrl: 'app/directives/navbar/navbar.html',\n      scope: {},\n      controller: NavbarController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    /** @ngInject */\n    function NavbarController($rootScope,loginSrv) {\n      var vm = this;\n      vm.user = loginSrv.getUser();\n      vm.signOut = loginSrv.logout;\n      vm.cart = $rootScope.shared.cart;\n    }\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('webFrontend')\n    .directive('wineDetail', wineDetail);\n\n  /** @ngInject */\n  function wineDetail() {\n    return {\n      restrict: 'E',\n      templateUrl: 'app/directives/wine/wine.html',\n      scope: {\n        wine: '='\n      },\n      controller: WineController,\n      controllerAs: 'vm'\n    };\n\n    /** @ngInject */\n    function WineController(cartSrv) {\n      var vm = this;\n\n      vm.buy = function (wid) {\n        cartSrv.add(wid);\n      }\n    }\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('webFrontend')\n    .service('wineSrv', WineService);\n\n  /** @ngInject */\n  function WineService($log, $http) {\n\n    this.findById = function (wid) {\n      $log.info('Find', wid);\n      return $http.get('api/wine/' + wid)\n        .then(function (response) {\n          return response.data;\n        });\n    };\n\n    this.search = function (query) {\n      $log.info('Search', query);\n      return $http.get('api/wine' + (query ? '?q=' + query : ''))\n        .then(function (response) {\n          return response.data;\n        });\n    };\n\n    this.addComment = function (wid, message) {\n      $log.info('Add comment', message);\n      return $http.post('api/wine/' + wid + '/comments', message)\n        .then(function (response) {\n          return response.data;\n        });\n    }\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('webFrontend')\n    .service('loginSrv', LoginService);\n\n  /** @ngInject */\n  function LoginService($state, $auth) {\n\n    this.login = function (user) {\n      return $auth.login(user);\n      // FIXME implements backend\n      // api/auth/login should send { token: createJWT(user) }\n    };\n\n    this.getUser = function () {\n      return $auth.getPayload();\n    };\n\n    this.logout = function () {\n      $auth.logout();\n      $state.go('login');\n    };\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('webFrontend')\n    .service('cellarSrv', CellarService);\n\n  /** @ngInject */\n  function CellarService($log, $http) {\n\n    this.getMyCellar = function () {\n      return $http.get('api/cellar')\n        .then(function (response) {\n          return response.data;\n        });\n    };\n\n    this.drink = function (wid, quantity) {\n      var qty = quantity | 1;\n      $log.info('Drink', qty, 'for', wid);\n      return $http.post('api/cellar/drink/' + wid, qty)\n        .then(function (response) {\n          return parseInt(response.data);\n        });\n    };\n\n    this.setFavorite = function (wid, favorite) {\n      $log.info('Favorite', wid, favorite);\n      return $http.post('api/cellar/favorite/' + wid, favorite)\n        .then(function (response) {\n          return response.data;\n        });\n    };\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('webFrontend')\n    .service('cartSrv', CartService);\n\n  /** @ngInject */\n  function CartService($log, $http, storage, wineSrv) {\n    var key = \"cart\";\n    var cart = angular.fromJson(storage.getItem(key) || \"[]\");\n    var that = this;\n    this.getMyCart = function () {\n      return cart;\n    };\n\n    this.add = function (wid, quantity) {\n      var qty = quantity || 1;\n      $log.info('Cart, add', qty, 'for', wid);\n      var current = cart.find(function (order) {\n        return order.wine.id === wid;\n      });\n      if (current) {\n        current.quantity += qty;\n        storage.setItem(key, angular.toJson(cart));\n      } else {\n        wineSrv.findById(wid)\n          .then(function (detail) {\n            cart.push({\n              wine: detail.wine,\n              stock: detail.stock,\n              quantity: qty\n            });\n            storage.setItem(key, angular.toJson(cart));\n          });\n      }\n    };\n\n    this.remove = function (stock) {\n      $log.info('Clear cart');\n      var idx = cart.indexOf(stock);\n      if (idx >= 0) {\n        cart.splice(idx, 1);\n      }\n    };\n\n    this.clear = function () {\n      $log.info('Clear cart');\n      cart.splice(0, cart.length);\n      storage.setItem(key, angular.toJson(cart));\n    };\n\n    this.order = function () {\n      var body = cart.map(function (elt) {\n        return {wid: elt.wine.id, quantity: elt.quantity};\n      });\n      var order = {entries: body};\n      $log.info('Order', order);\n      return $http.post('api/cart/order', order)\n        .then(function () {\n          that.clear();\n          return cart;\n        });\n    };\n  }\n})();\n\n//cssClass\n(function () {\n  'use strict';\n\n  angular\n    .module('webFrontend')\n    .filter('imgName', ImgNameFilter);\n\n  /** @ngInject */\n  function ImgNameFilter() {\n    return function (value) {\n      return value\n        ? value.replace(/[oöô]/g, 'o').replace(/[èéêë]/g, 'e')\n        : null;\n    };\n  }\n})();\n\n//cssClass\n(function () {\n  'use strict';\n\n  angular\n    .module('webFrontend')\n    .filter('cssClass', CssClassFilter);\n\n  /** @ngInject */\n  function CssClassFilter() {\n    return function (value) {\n      return value\n        ? value.replace(/\\W/g, '').replace(/[èéêë]/g, 'e')\n        : 'label-default';\n    };\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('webFrontend')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock($log, $rootScope, cartSrv) {\n\n    $log.debug('Started');\n    $rootScope.shared = {\n      cart: cartSrv.getMyCart()\n    };\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('webFrontend')\n    .config(routerConfig);\n\n  /** @ngInject */\n  function routerConfig($stateProvider, $urlRouterProvider) {\n    $stateProvider\n    // Login\n      .state('login', {\n        url: '/login',\n        templateUrl: 'app/routes/login/login.html',\n        controller: 'LoginController as vm'\n      })\n      // Main\n      .state('main', {\n        url: '/main',\n        abstract: true,\n        templateUrl: 'app/routes/main/main.html'\n      })\n      // Cellar\n      .state('cellar', {\n        url: '/cellar',\n        parent: 'main',\n        views: {\n          'body@main': {\n            controller: 'CellarController as vm',\n            templateUrl: 'app/routes/main/cellar/cellar.html'\n          }\n        }\n      })\n      // Catalog List\n      .state('catalog', {\n        url: '/catalog',\n        parent: 'main',\n        views: {\n          'body@main': {\n            controller: 'CatalogController as vm',\n            templateUrl: 'app/routes/main/catalog/catalog.html'\n          }\n        }\n      })\n      // Wine\n      .state('wine', {\n        url: '/wine/:wid',\n        parent: 'main',\n        views: {\n          'body@main': {\n            controller: 'WineController as vm',\n            templateUrl: 'app/routes/main/wine/wine.html'\n          }\n        }\n      })\n      // Cart\n      .state('cart', {\n        url: '/cart',\n        parent: 'main',\n        views: {\n          'body@main': {\n            controller: 'CartController as vm',\n            templateUrl: 'app/routes/main/cart/cart.html'\n          }\n        }\n      })\n      // End\n    ;\n\n    $urlRouterProvider.otherwise('/login');\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular.module('webFrontend')\n    .constant('storage', localStorage)\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('webFrontend')\n    .config(config);\n\n  /** @ngInject */\n  function config(config, $logProvider, toastrConfig, $authProvider) {\n    // Enable log\n    $logProvider.debugEnabled(true);\n\n    // Set options third-party lib\n    toastrConfig.allowHtml = true;\n    toastrConfig.timeOut = 3000;\n    toastrConfig.positionClass = 'toast-top-right';\n    toastrConfig.preventDuplicates = true;\n    toastrConfig.progressBar = true;\n\n    // Auth\n    $authProvider.loginUrl = config.loginUrl + 'api/auth/login';\n  }\n\n})();\n\nangular.module(\"webFrontend\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/directives/navbar/navbar.html\",\"<nav class=\\\"navbar navbar-dark\\\"><a class=\\\"navbar-brand\\\" ui-sref=\\\"cellar\\\">My Cellar</a><div class=\\\"container\\\"><ul class=\\\"nav navbar-nav\\\"><li class=\\\"nav-item\\\" ui-sref-active=\\\"active\\\"><a class=\\\"nav-link\\\" ui-sref=\\\"cellar\\\">Ma Cave</a></li><li class=\\\"nav-item\\\" ui-sref-active=\\\"active\\\"><a class=\\\"nav-link\\\" ui-sref=\\\"catalog\\\">Catalogue</a></li></ul><ul class=\\\"nav navbar-nav pull-xs-right\\\"><li class=\\\"nav-item\\\" ui-sref-active=\\\"active\\\" ng-if=\\\"vm.cart.length\\\"><a class=\\\"nav-link\\\" ui-sref=\\\"cart\\\" title=\\\"Mon panier\\\"><i class=\\\"fa fa-shopping-cart\\\"></i> <span class=\\\"label label-pill label-default\\\">{{vm.cart.length}}</span></a></li><li class=\\\"nav-item\\\"><a class=\\\"nav-link\\\"><i class=\\\"fa fa-user\\\"></i>{{vm.user.email}}</a></li><li class=\\\"nav-item\\\"><a class=\\\"nav-link\\\" ng-click=\\\"vm.signOut()\\\" title=\\\"Quitter\\\"><i class=\\\"fa fa-sign-out\\\"></i></a></li></ul></div></nav>\");\n$templateCache.put(\"app/directives/wine/wine.html\",\"<div class=\\\"wine detail\\\"><h3 ui-sref=\\\"wine({wid:wine.id})\\\"><span class=\\\"appellation\\\">{{wine.appellation}}</span> - <span class=\\\"millesime\\\">{{wine.millesime}}</span> <span class=\\\"label label-pill {{wine.couleur | cssClass}}\\\">{{wine.region}} - {{wine.couleur}}</span></h3><h4 class=\\\"text-muted\\\">{{wine.produit}}</h4><div class=\\\"actions\\\"><wine-price category=\\\"wine.priceCategory\\\"></wine-price><a class=\\\"btn btn-danger-outline\\\" ng-click=\\\"vm.buy(wine.id)\\\"><i class=\\\"fa fa-cart-plus\\\"></i> Acheter</a></div><div class=\\\"info\\\"><wine-img wine=\\\"wine\\\"></wine-img><ul class=\\\"characteristics\\\"><li ng-show=\\\"wine.cepageDominant\\\"><span class=\\\"lbl\\\">Cépage</span> <span class=\\\"value\\\">{{wine.cepageDominant}}</span></li><li ng-show=\\\"wine.alcool\\\"><span class=\\\"lbl\\\">Alcool</span> <span class=\\\"value\\\">{{wine.alcool}}</span></li><li ng-show=\\\"wine.temperatureDeService\\\"><span class=\\\"lbl\\\">Température de service</span> <span class=\\\"value\\\">{{wine.temperatureDeService}}</span></li><li>&nbsp;</li><li ng-show=\\\"wine.conservation\\\"><span class=\\\"lbl\\\">Conservation</span> <span class=\\\"value\\\">{{wine.conservation}}</span></li><li ng-show=\\\"wine.aBoireAPartirDe\\\"><span class=\\\"lbl\\\">A boire à partir de</span> <span class=\\\"value\\\">{{wine.aBoireAPartirDe}}</span></li><li ng-show=\\\"wine.garderJusquA\\\"><span class=\\\"lbl\\\">Garder jusqu\\'en</span> <span class=\\\"value\\\">{{wine.garderJusquA}}</span></li><li>&nbsp;</li><li ng-show=\\\"wine.aOeil\\\"><span class=\\\"lbl\\\">A l\\'oeil</span> <span class=\\\"value\\\">{{wine.aOeil}}</span></li><li ng-show=\\\"wine.auNez\\\"><span class=\\\"lbl\\\">Au nez</span> <span class=\\\"value\\\">{{wine.auNez}}</span></li><li ng-show=\\\"wine.enBouche\\\"><span class=\\\"lbl\\\">En Bouche</span> <span class=\\\"value\\\">{{wine.enBouche}}</span></li><li>&nbsp;</li><li ng-show=\\\"wine.accordsMetsVin\\\"><span class=\\\"lbl\\\">Accords mets-vin</span> <span class=\\\"value\\\">{{wine.accordsMetsVin}}</span></li><li ng-show=\\\"wine.accordsRecommandes\\\"><span class=\\\"lbl\\\">Accords recommandés</span> <span class=\\\"value\\\">{{wine.accordsRecommandes}}</span></li></ul><div class=\\\"wine-region-img\\\" ng-if=\\\"wine.region\\\"><img ng-src=\\\"assets/regions/{{wine.region | imgName}}.png\\\" alt=\\\"{{wine.region}}\\\"></div></div></div>\");\n$templateCache.put(\"app/directives/wineImg/wine.image.html\",\"<div class=\\\"wine-img\\\"><img ng-src=\\\"{{url}}images/{{wine.image}}\\\" alt=\\\"{{wine.produit}}\\\"></div>\");\n$templateCache.put(\"app/directives/winePrice/wine.price.html\",\"<span class=\\\"btn btn-secondary wine-price\\\"><span class=\\\"price\\\"><i class=\\\"fa fa-eur\\\"></i> <i class=\\\"fa fa-eur\\\" ng-show=\\\"category === \\'MID\\' || category === \\'EXP\\'\\\"></i> <i class=\\\"fa fa-eur\\\" ng-show=\\\"category === \\'EXP\\'\\\"></i></span></span>\");\n$templateCache.put(\"app/routes/login/login.html\",\"<div class=\\\"login\\\"><form name=\\\"loginForm\\\" ng-submit=\\\"vm.login()\\\" novalidate=\\\"\\\"><div class=\\\"logo\\\"><img src=\\\"assets/images/login.jpg\\\" alt=\\\"Wine Glass\\\"></div><p class=\\\"error bg-danger\\\" ng-if=\\\"vm.error\\\">{{vm.error}}</p><div class=\\\"form-group\\\" ng-class=\\\"{\\'has-danger\\': loginForm.email.$invalid && loginForm.email.$dirty}\\\"><span class=\\\"input-group\\\"><span class=\\\"input-group-addon\\\"><i class=\\\"fa fa-envelope-o\\\"></i></span> <input ng-model=\\\"vm.user.email\\\" name=\\\"email\\\" type=\\\"email\\\" class=\\\"form-control\\\" placeholder=\\\"Email\\\" required=\\\"\\\"></span> <small class=\\\"text-danger\\\" ng-if=\\\"loginForm.email.$error.required && loginForm.email.$dirty\\\">Login obligatoire !</small> <small class=\\\"text-danger\\\" ng-if=\\\"loginForm.email.$error.email && loginForm.email.$dirty\\\">Adresse email invalide !</small></div><div class=\\\"form-group\\\" ng-class=\\\"{\\'has-danger\\': loginForm.pwd.$invalid && loginForm.pwd.$dirty}\\\"><span class=\\\"input-group\\\"><span class=\\\"input-group-addon\\\"><i class=\\\"fa fa-user-secret\\\"></i></span> <input ng-model=\\\"vm.user.password\\\" name=\\\"pwd\\\" type=\\\"password\\\" class=\\\"form-control\\\" placeholder=\\\"Mot de passe\\\" required=\\\"\\\"></span> <small class=\\\"text-danger\\\" ng-if=\\\"loginForm.pwd.$error.required && loginForm.pwd.$dirty\\\">Mot de passe obligatoire !</small></div><div class=\\\"actions\\\"><button type=\\\"submit\\\" class=\\\"btn btn-primary\\\" ng-disabled=\\\"!loginForm.$valid\\\"><i class=\\\"fa fa-sign-in\\\"></i> Authentification</button></div></form></div>\");\n$templateCache.put(\"app/routes/main/main.html\",\"<wine-navbar></wine-navbar><div class=\\\"main container-fluid\\\"><main ui-view=\\\"body\\\"></main></div>\");\n$templateCache.put(\"app/routes/main/cart/cart.html\",\"<div class=\\\"cart\\\"><h1>Mon panier</h1><div class=\\\"actions\\\"><a class=\\\"btn btn-danger-outline\\\" ng-click=\\\"vm.clear()\\\"><i class=\\\"fa fa-trash\\\"></i> Vider le panier</a></div><form class=\\\"wines\\\" ng-show=\\\"vm.cart.length\\\" ng-submit=\\\"vm.order()\\\"><div class=\\\"wine card\\\" ng-repeat=\\\"stock in vm.cart as searchResult\\\"><wine-img wine=\\\"stock.wine\\\"></wine-img><div class=\\\"info\\\"><h3><a class=\\\"btn btn-danger-outline btn-sm\\\" ng-click=\\\"vm.remove(stock)\\\"><i class=\\\"fa fa-trash\\\"></i></a> <span class=\\\"appellation\\\">{{stock.wine.appellation}} - {{stock.wine.contenance}}</span> <span class=\\\"millesime\\\">{{stock.wine.millesime}}</span></h3><h4 class=\\\"text-muted\\\">{{stock.wine.produit}}</h4><p ng-show=\\\"stock.wine.accordsMetsVin\\\"><i class=\\\"fa fa-cutlery\\\"></i> {{stock.wine.accordsMetsVin}}</p><p ng-show=\\\"stock.wine.accordsRecommandes\\\">{{stock.wine.accordsRecommandes}}</p></div><div class=\\\"wine-qty\\\"><fieldset class=\\\"form-group\\\"><input type=\\\"number\\\" ng-model=\\\"stock.quantity\\\" min=\\\"0\\\" class=\\\"form-control\\\"></fieldset><div class=\\\"total\\\">{{stock.quantity * stock.stock.price | currency}}</div></div></div><div class=\\\"actions\\\"><span class=\\\"tva\\\">TVA: {{vm.computeTva() | currency}}</span></div><div class=\\\"actions\\\"><span class=\\\"total\\\">Total: {{vm.computeTotal() | currency}}</span></div><div class=\\\"actions\\\"><button type=\\\"submit\\\" class=\\\"btn btn-primary\\\"><i class=\\\"fa fa-credit-card\\\"></i> Commander</button></div></form><div class=\\\"alert alert-warning\\\" role=\\\"alert\\\" ng-hide=\\\"vm.cart.length\\\"><strong>Panier vide !</strong> <a class=\\\"btn btn-secondary-outline\\\" ui-sref=\\\"catalog\\\">Ajouter un vin du catalogue</a></div></div>\");\n$templateCache.put(\"app/routes/main/catalog/catalog.html\",\"<div class=\\\"catalog\\\"><header><h1>Catalogue</h1><form class=\\\"form-inline\\\"><div class=\\\"form-group\\\"><div class=\\\"input-group\\\"><input ng-model=\\\"vm.query\\\" type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Rechercher...\\\" ng-model-options=\\\"{ debounce: 250 }\\\" ng-change=\\\"vm.search()\\\"> <span class=\\\"input-group-addon\\\" id=\\\"basic-addon1\\\"><i class=\\\"fa fa-search\\\"></i></span></div></div></form></header><section class=\\\"search-matches\\\"><ul class=\\\"search-result\\\"><li ng-repeat=\\\"wine in vm.wines\\\" ng-class=\\\"{\\'active\\': wine.id === vm.wine.wine.id}\\\" ng-click=\\\"vm.select(wine.id)\\\"><h3><span class=\\\"appellation\\\">{{wine.appellation}}</span> <span class=\\\"millesime\\\">{{wine.millesime}}</span></h3><div class=\\\"text-muted\\\">{{wine.produit}}</div><div class=\\\"info\\\"><wine-price category=\\\"wine.priceCategory\\\"></wine-price><a ui-sref=\\\"wine({wid: wine.id})\\\" class=\\\"btn btn-secondary-outline btn-sm pull-right\\\">Detail</a></div></li></ul><div class=\\\"detail\\\"><wine-detail wine=\\\"vm.wine.wine\\\"></wine-detail></div></section></div>\");\n$templateCache.put(\"app/routes/main/cellar/cellar.html\",\"<div class=\\\"cellar\\\"><header><h1>Ma cave</h1><form class=\\\"form-inline\\\"><div class=\\\"form-group\\\"><div class=\\\"input-group\\\"><input ng-model=\\\"vm.search.wine\\\" type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Rechercher...\\\"> <span class=\\\"input-group-addon\\\" id=\\\"basic-addon1\\\"><i class=\\\"fa fa-search\\\"></i></span></div></div></form></header><div class=\\\"wines\\\"><div class=\\\"card wine\\\" ng-repeat=\\\"stock in vm.cellar | filter:vm.search.wine as searchResult\\\" ng-class=\\\"{\\'empty\\':stock.quantity<=0}\\\"><div class=\\\"card-header\\\"><h3><button ng-click=\\\"vm.toggleFavorite(stock)\\\" class=\\\"btn btn-secondary btn-sm\\\"><i class=\\\"fa fa-heart\\\" ng-class=\\\"{\\'fa-heart\\':stock.favorite, \\'fa-heart-o\\':!stock.favorite}\\\"></i></button> <span class=\\\"appellation\\\">{{stock.wine.appellation}}</span> <span class=\\\"millesime\\\">{{stock.wine.millesime}}</span></h3><h4 class=\\\"text-muted\\\">{{stock.wine.produit}}</h4></div><div class=\\\"card-block info\\\"><wine-img wine=\\\"stock.wine\\\"></wine-img><div class=\\\"wine-actions\\\"><span class=\\\"btn wine-quantity btn-block\\\" ng-class=\\\"{\\'btn-secondary\\':stock.quantity>0, \\'btn-danger-outline\\':stock.quantity<=0}\\\">{{stock.quantity}} Btls.</span><wine-price category=\\\"stock.wine.priceCategory\\\"></wine-price><button class=\\\"btn btn-primary-outline btn-block\\\" ng-click=\\\"vm.drink(stock.wine.id)\\\" ng-show=\\\"stock.quantity>0\\\"><i class=\\\"fa fa-glass\\\"></i> Boire</button> <a class=\\\"btn btn-block\\\" ng-click=\\\"vm.buy(stock.wine.id)\\\" ng-class=\\\"{\\'btn-danger-outline\\':stock.quantity>0, \\'btn-danger\\':stock.quantity<=0}\\\"><i class=\\\"fa fa-cart-plus\\\"></i> Acheter</a></div></div><div class=\\\"card-block wine-kind\\\"><span class=\\\"label label-pill {{stock.wine.couleur | cssClass}}\\\">{{stock.wine.region}} - {{stock.wine.couleur}}</span></div><div class=\\\"card-block actions\\\"><a ui-sref=\\\"wine({wid: stock.wine.id})\\\" class=\\\"btn btn-block btn-secondary-outline\\\">Détail</a></div><div class=\\\"card-block\\\"><p class=\\\"card-text\\\" ng-show=\\\"stock.wine.accordsMetsVin\\\"><i class=\\\"fa fa-cutlery\\\"></i> {{stock.wine.accordsMetsVin}}</p></div></div></div><div class=\\\"alert alert-warning\\\" role=\\\"alert\\\" ng-if=\\\"!searchResult.length\\\"><strong>Vide !</strong><div ng-hide=\\\"vm.search.wine\\\">Pas de vin dans votre cave <a class=\\\"btn btn-secondary-outline\\\" ui-sref=\\\"catalog\\\">Sélectionner un vin du catalogue</a></div><div ng-show=\\\"vm.search.wine\\\">Auncun vin de votre cave correspond à votre recherche</div></div></div>\");\n$templateCache.put(\"app/routes/main/wine/wine.html\",\"<div class=\\\"detail\\\"><wine-detail wine=\\\"vm.wine.wine\\\"></wine-detail><hr><div class=\\\"comments\\\"><form ng-submit=\\\"vm.addComment()\\\"><header><h2>Commentaires</h2></header><article ng-repeat=\\\"comment in vm.wine.comments\\\" class=\\\"comment\\\"><blockquote class=\\\"blockquote\\\"><p class=\\\"m-b-0\\\">{{comment.message}}</p><footer class=\\\"blockquote-footer\\\"><span class=\\\"date\\\">{{comment.date |date}}</span>, <abbr title=\\\"{{comment.email}}\\\">{{comment.author}}</abbr></footer></blockquote></article><hr><textarea class=\\\"form-control\\\" ng-model=\\\"vm.comment\\\" rows=\\\"3\\\" placeholder=\\\"Votre commentaire ...\\\"></textarea><div class=\\\"actions\\\"><button type=\\\"submit\\\" class=\\\"btn btn-primary\\\" ng-disabled=\\\"!vm.comment\\\"><i class=\\\"fa fa-comment\\\"></i> Ajouter un commentaire</button></div></form></div></div>\");}]);"],"sourceRoot":"/source/"}